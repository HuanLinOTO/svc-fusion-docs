<!-- # 正式使用
:::info
本整合包不提供现成模型！
:::

右侧的标题导航可以帮助你快速找到你需要的内容。

## 结构说明

在整合包中，你只需要关注以下几个文件夹：

| 文件夹 | 说明 |
| --- | --- |
| `exp` | 工作目录 |
| `archieve` | 训练归档文件夹 |
| `models` | 已训练模型文件夹 |
| `dataset_raw` | 原始数据集文件夹 |
| `data` | 可用于训练的数据集存放位置，完成训练后可删除 |
| `tmp` | 数据处理临时文件夹，完成数据处理后可删除 |

## 启动 WebUI

整合包目录下面有一个  `启动 WebUI.bat`，双击即可启动 WebUI。


![](/imgs/{FA252EE3-25E8-4f47-97EB-BD1C46F2A147}.png)

## 推理

### 搜索位置

选择一个文件夹，WebUI 会搜索该文件夹下的所有模型文件。

### 加载模型

选择一个模型文件，点击加载模型。

`cuda` 代表使用 GPU 进行推理，`cpu` 代表使用 CPU 进行推理。

DDSP 推理脚本会自动从搜索位置中读取配置文件

### 选择音频

你需要上传一个 `.wav` 格式的音频文件

### 参数

#### F0 预测器

下表取自[羽毛的文档](https://www.yuque.com/umoubuton/ueupp5)

| 预测器 | 优点 | 缺点 |
| --- | --- | --- |
| pm | 速度快，占用低 | 容易出现哑音 |
| crepe | 基本不会出现哑音 | 显存占用高，自带均值滤波，因此可能会出现跑调 |
| dio | - | 可能跑调 |
| harvest | 低音部分有更好表现 | 其他音域就不如别的算法了 |
| rmvpe | 六边形战士，目前最完美的预测器 | 几乎没有缺点（极端长低音可能会出错） |
| fcpe | SVC 开发组自研，目前最快的预测器，且有不输 crepe 的准确度 ~~~复活赛打赢了~~~ | - |

#### 采样器

目前暂不明确

#### 音频变调

也就是所谓的 "调key" ，可以让音频变得更高或更低，从而拟合模型音色

#### 推理加速

越高越快，质量越差，但是注意与采样步数有一定要求

:::info
下表由 [@Charming·](https://space.bilibili.com/399248533) 与 [@純愛ちゃん](https://space.bilibili.com/334571001) 提供
:::

| 采样器 | 要求 |
| --- | --- |
| 通用 | 加速和步数都等于1时都可以跑 |
| dpm-solver | 步数大于等于2倍加速 |
| pndm | 步数大于加速 |
| ddim | 没有限制 |
| unipc | 步数大于等于2倍加速 |

#### 采样步数

越高越慢，质量越好，但是注意与推理加速有一定要求，详见上表

#### 阈值

人声切片的阈值，也就是切片的敏感度，如果有底噪可以调为 -40 或更高

#### 批量推理

如果你有多个音频需要推理，可以打开这个选项，但是启用后无法在 WebUI 中查看推理结果

## 数据处理

目前只提供了全自动数据处理，该数据处理包括了重采样，切片，划分验证集，生成 f0 等操作

## 训练

在你确保完成数据处理后，你可以从这里开始训练

### 参数

#### 训练设备

`cuda` 代表使用 GPU 进行训练，`cpu` 代表使用 CPU 进行训练。

#### 批次大小 (Batch Size)

越大越快，但是显存占用也越大

#### 数据加载器进程数

如果你显卡挺好，可以设为 `0`

#### 训练精度

选择 `fp16`、`bf16` 可以获得更快的速度，但是炸炉概率 up up

默认选择 `fp32`

:::warning
如果你选择 `CPU` 进行训练，请将训练模式改为 `fp32`
:::

:::warning
目前因为 DDSP 上游问题，选择半精度 (fp16) 的炸炉 (loss: NaN) 概率几乎是 100%，如果你遇到这种问题，可以调一个极小的学习率(lr)来解决
:::

#### 验证间隔 (interval_val)

每 `N` 步验证一次，同时保存一次模型

一般默认就是最好的

#### 日志输出间隔 (interval_log)

每 `N` 步输出一次日志，建议调大点，因为实在是太快辣

一般默认就是最好的

#### 强制保存模型间隔 (interval_force_save)

每 `N` 步强制保存一次模型

也就是说满足 当前步数/强制保存模型间隔 的余数为 0 时保存的模型不会被自动删掉

一般默认就是最好的

#### 缓存设备

选择 `cuda` 可以获得更快的速度，但是需要更大显存的显卡

当选择 `cuda` 时，数据加载器进程数将自动设置为 0

#### 缓存所有数据

可以获得更快的速度，但是需要大内存/显存的设备

### 归档训练结果

训练完成后，你可以选择归档训练结果，这会将训练结果移动到 `archieve` 文件夹中

归档之后回到推理界面点击刷新选项即可看到归档后的模型

如果还需要恢复，把归档文件放到 `exp/cascade` 文件夹中即可 -->
